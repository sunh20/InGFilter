
<!DOCTYPE html>
<html>
   <head>
      <script src="//ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
   </head>
<body>

   <h1>InStats</h1>   
   <p>~*~Check your Instagram stats~*~</p>

   <p><a href = 
      "https://www.instagram.com/oauth/authorize/?client_id=cc4d3923bd05428597ec55a70b5680fa&redirect_uri=http://samsamsun.me&response_type=token">
      Authenticate</a></p>
   
   <script>
   // gets a users access token, stores to access_token      
   var access_token = window.location.href.split("=")[1];
   // console.log(access_token); // for debugging
   // if (access_token != null) {
   //   document.write("Authentication complete");  
   // }
      
   // gets users data (username, bio, follower counts, media, id, full name, profile pic)
   function getUserData() {
      $.ajax ({  
         type: "GET",
         dataType: "jsonp",
         cache: false,
         url: "https://api.instagram.com/v1/users/self/?access_token=" + access_token,
         success: function(data) {
            console.log("sucessfully retrived data");
            $('.name').text(data.data.username);
            $('.bio').text(data.data.bio);
            $('.realName').text(data.data.full_name);
            $(".pic").append("<li><img src='" + data.data.profile_picture + "'></img></a></li>");
         }
      });
      return null;
   }

   // get recent media
   function getRecentMedia() {
      $.ajax ({  
         type: "GET",
         dataType: "jsonp",
         cache: false,
         url: "https://api.instagram.com/v1/users/self/media/recent/?access_token=" + access_token,
         success: function(data) {
            for (var i = 0; i < 3; i++) {
               $(".media").append("<li><a target='_blank' href='" + data.data[i].link + "'><img src='" + data.data[i].images.low_resolution.url + "'></img></a></li>");
            }
         }
      });
      return null;
   }

   </script>

   <p>Welcome <b class="realName"></b>!</p>
   <p>Username: <b class="name"></b></p>
   <p>Bio: <b class="bio"></b></p>
   <p class="pic"></p>

   <button type="button" onclick="getUserData(); this.style.display = 'none'">Load information</button>

   <p>Last 3 photos</p>
   <p class="media"></p>
   
   <p>Top 3 photos</p>
   <p>Top 3 followers</p>
   <p>Follow each other</p>
  

</body>
</html>
